{"ast":null,"code":"import _regeneratorRuntime from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/runner/HackyBirthdayMLH/src/components/tutoring/tutor.search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport TutorCard from \"../misc/TutorCard.js\";\nimport firebase from \"firebase\";\nimport { useParams, useLocation, useHistory } from \"react-router-dom\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TutorSearch() {\n  _s();\n\n  var _this = this;\n\n  useEffect(function () {\n    fetchTutors();\n  }, []);\n\n  var _useLocation = useLocation(),\n      state = _useLocation.state;\n\n  var subject = state.subject;\n  console.log(subject);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tutors = _useState2[0],\n      setTutors = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      _grade = _useState4[0],\n      _setGrade = _useState4[1];\n\n  function fetchTutors() {\n    return _fetchTutors.apply(this, arguments);\n  }\n\n  function _fetchTutors() {\n    _fetchTutors = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var db, data, response, tutor_list, tutor_data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              db = firebase.firestore();\n              _context.next = 3;\n              return db.collection(\"students\").doc(firebase.auth().currentUser.uid).get().then(function (data) {\n                return data.data();\n              }).then(function (data) {\n                _setGrade(data[\"grade\"]);\n\n                console.log(\"Grade: \" + _grade);\n              });\n\n            case 3:\n              data = _context.sent;\n              response = db.collection(\"tutors\").where(\"subjects\", \"==\", subject).where(\"grade\", \">=\", _grade); // .where(\"capacity\", \"<\", 3)\n              // TODO: Fix the self replicating error somehow...\n\n              tutor_list = [];\n              _context.next = 8;\n              return response.get();\n\n            case 8:\n              tutor_data = _context.sent;\n              tutor_data.forEach(function (item) {\n                var item_data = item.data();\n                console.log(\"Tutor: \".concat(JSON.stringify(item_data)));\n                tutor_list.push(item_data);\n              });\n              setTutors(tutor_list);\n              console.log(\"Passed Subject: \" + subject);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchTutors.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tutorList\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: \"15px\"\n      },\n      children: [\"Tutors for \", _grade, \"th grade \", subject]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: tutors.map(function (item, i) {\n        return /*#__PURE__*/_jsxDEV(TutorCard, {\n          name: item.name,\n          gradeLevel: \"\".concat(item.grade, \"th grade\"),\n          uid: item.uid,\n          email: item.email,\n          imgSrc: item.image\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TutorSearch, \"ZzkBltw0lEfi4ZUrTYatQMfi7r8=\", false, function () {\n  return [useLocation];\n});\n\n_c = TutorSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"TutorSearch\");","map":{"version":3,"sources":["/home/runner/HackyBirthdayMLH/src/components/tutoring/tutor.search.js"],"names":["React","useState","useEffect","TutorCard","firebase","useParams","useLocation","useHistory","Container","Row","Col","TutorSearch","fetchTutors","state","subject","console","log","tutors","setTutors","_grade","_setGrade","db","firestore","collection","doc","auth","currentUser","uid","get","then","data","response","where","tutor_list","tutor_data","forEach","item","item_data","JSON","stringify","push","marginTop","map","i","name","grade","email","image"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TutorCard from \"../misc/TutorCard.js\";\r\nimport firebase from \"firebase\";\r\nimport { useParams, useLocation, useHistory } from \"react-router-dom\";\nimport {Container, Row, Col} from \"react-bootstrap\"\r\n\r\nexport default function TutorSearch() {\r\n  useEffect(() => {\r\n    fetchTutors();\r\n  }, []);\r\n\r\n  const { state } = useLocation();\r\n  const subject = state.subject;\r\n\r\n  console.log(subject);\r\n\r\n  const [tutors, setTutors] = useState([]);\r\n\r\n  const [_grade, _setGrade] = useState(0);\r\n\r\n  async function fetchTutors() {\r\n    const db = firebase.firestore();\r\n    const data = await db\r\n      .collection(\"students\")\r\n      .doc(firebase.auth().currentUser.uid)\r\n      .get()\r\n      .then((data) => data.data())\r\n      .then((data) => {\r\n        _setGrade(data[\"grade\"]);\r\n        console.log(\"Grade: \" + _grade);\r\n      });\r\n\r\n    const response = db\r\n      .collection(\"tutors\")\r\n      .where(\"subjects\", \"==\", subject)\r\n      .where(\"grade\", \">=\", _grade);\r\n    // .where(\"capacity\", \"<\", 3)\r\n\r\n    // TODO: Fix the self replicating error somehow...\r\n    const tutor_list = [];\r\n    const tutor_data = await response.get();\r\n\r\n    tutor_data.forEach((item) => {\r\n      const item_data = item.data();\r\n      console.log(`Tutor: ${JSON.stringify(item_data)}`);\r\n      tutor_list.push(item_data);\r\n    });\r\n    setTutors(tutor_list);\r\n\r\n    console.log(\"Passed Subject: \" + subject);\r\n  }\r\n\r\n  return (\r\n    <div className=\"tutorList\">\r\n      <h3 style={{ marginTop: \"15px\" }}>\r\n        Tutors for {_grade}th grade {subject}\r\n      </h3>\r\n      <Container fluid>\n        {tutors.map((item, i) => {\r\n          return (\r\n            <TutorCard\r\n              key={i}\r\n              name={item.name}\r\n              gradeLevel={`${item.grade}th grade`}\r\n              uid={item.uid}\r\n              email={item.email}\r\n              imgSrc={item.image}\r\n            />\r\n          );\r\n        })}\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}