{"ast":null,"code":"import _regeneratorRuntime from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/runner/HackyBirthdayMLH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/runner/HackyBirthdayMLH/src/components/tutoring/tutor.search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport TutorCard from \"../misc/TutorCard.js\";\nimport firebase from \"firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TutorSearch(_ref) {\n  _s();\n\n  var _this = this;\n\n  var subject = _ref.subject;\n  useEffect(function () {\n    fetchTutors();\n  }, []);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tutors = _useState2[0],\n      setTutors = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      _grade = _useState4[0],\n      _setGrade = _useState4[1];\n\n  function fetchTutors() {\n    return _fetchTutors.apply(this, arguments);\n  }\n\n  function _fetchTutors() {\n    _fetchTutors = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var db, data, response, tutor_data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setTutors([]);\n              db = firebase.firestore();\n              _context.next = 4;\n              return db.collection(\"students\").doc(firebase.auth().currentUser.uid).get().then(function (data) {\n                return data.data();\n              }).then(function (data) {\n                _setGrade(data[\"grade\"]);\n\n                console.log(\"Grade: \" + _grade);\n              });\n\n            case 4:\n              data = _context.sent;\n              response = db.collection(\"tutors\").where(\"subjects\", \"==\", \"Science\").where(\"grade\", \">=\", \"10\"); // TODO: Fix the self replicating error somehow...\n\n              _context.next = 8;\n              return response.get();\n\n            case 8:\n              tutor_data = _context.sent;\n              tutor_data.forEach(function (item) {\n                var item_data = item.data();\n                setTutors([].concat(_toConsumableArray(tutors), [item_data]));\n                console.log(\"Tutors: \".concat(JSON.stringify(item_data)));\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchTutors.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tutorList\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: _grade\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), tutors.map(function (item, i) {\n      return /*#__PURE__*/_jsxDEV(TutorCard, {\n        name: item.name,\n        gradeLevel: \"\".concat(item.grade, \"th grade\"),\n        uid: item.uid\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TutorSearch, \"158/5lCqkXd5frzOEIao/sr2fj0=\");\n\n_c = TutorSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"TutorSearch\");","map":{"version":3,"sources":["/home/runner/HackyBirthdayMLH/src/components/tutoring/tutor.search.js"],"names":["React","useState","useEffect","TutorCard","firebase","TutorSearch","subject","fetchTutors","tutors","setTutors","_grade","_setGrade","db","firestore","collection","doc","auth","currentUser","uid","get","then","data","console","log","response","where","tutor_data","forEach","item","item_data","JSON","stringify","map","i","name","grade"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,QAAP,MAAqB,UAArB;;AAEA,eAAe,SAASC,WAAT,OAAkC;AAAA;;AAAA;;AAAA,MAAXC,OAAW,QAAXA,OAAW;AAC/CJ,EAAAA,SAAS,CAAC,YAAM;AACdK,IAAAA,WAAW;AACZ,GAFQ,EAEN,EAFM,CAAT;;AAIA,kBAA4BN,QAAQ,CAAC,EAAD,CAApC;AAAA;AAAA,MAAOO,MAAP;AAAA,MAAeC,SAAf;;AAEA,mBAA4BR,QAAQ,CAAC,CAAD,CAApC;AAAA;AAAA,MAAOS,MAAP;AAAA,MAAeC,SAAf;;AAP+C,WAShCJ,WATgC;AAAA;AAAA;;AAAA;AAAA,4EAS/C;AAAA;AAAA;AAAA;AAAA;AAAA;AACEE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACMG,cAAAA,EAFR,GAEaR,QAAQ,CAACS,SAAT,EAFb;AAAA;AAAA,qBAGqBD,EAAE,CAClBE,UADgB,CACL,UADK,EAEhBC,GAFgB,CAEZX,QAAQ,CAACY,IAAT,GAAgBC,WAAhB,CAA4BC,GAFhB,EAGhBC,GAHgB,GAIhBC,IAJgB,CAIX,UAACC,IAAD;AAAA,uBAAUA,IAAI,CAACA,IAAL,EAAV;AAAA,eAJW,EAKhBD,IALgB,CAKX,UAACC,IAAD,EAAU;AACdV,gBAAAA,SAAS,CAACU,IAAI,CAAC,OAAD,CAAL,CAAT;;AACAC,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAYb,MAAxB;AACD,eARgB,CAHrB;;AAAA;AAGQW,cAAAA,IAHR;AAaQG,cAAAA,QAbR,GAamBZ,EAAE,CAChBE,UADc,CACH,QADG,EAEdW,KAFc,CAER,UAFQ,EAEI,IAFJ,EAEU,SAFV,EAGdA,KAHc,CAGR,OAHQ,EAGC,IAHD,EAGO,IAHP,CAbnB,EAkBE;;AAlBF;AAAA,qBAmB2BD,QAAQ,CAACL,GAAT,EAnB3B;;AAAA;AAmBQO,cAAAA,UAnBR;AAoBEA,cAAAA,UAAU,CAACC,OAAX,CAAmB,UAACC,IAAD,EAAU;AAC3B,oBAAMC,SAAS,GAAGD,IAAI,CAACP,IAAL,EAAlB;AACAZ,gBAAAA,SAAS,8BAAKD,MAAL,IAAaqB,SAAb,GAAT;AACAP,gBAAAA,OAAO,CAACC,GAAR,mBAAuBO,IAAI,CAACC,SAAL,CAAeF,SAAf,CAAvB;AACD,eAJD;;AApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAT+C;AAAA;AAAA;;AAoC/C,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,4BACE;AAAA,gBAAInB;AAAJ;AAAA;AAAA;AAAA;AAAA,YADF,EAEGF,MAAM,CAACwB,GAAP,CAAW,UAACJ,IAAD,EAAOK,CAAP,EAAa;AACvB,0BACE,QAAC,SAAD;AAEE,QAAA,IAAI,EAAEL,IAAI,CAACM,IAFb;AAGE,QAAA,UAAU,YAAKN,IAAI,CAACO,KAAV,aAHZ;AAIE,QAAA,GAAG,EAAEP,IAAI,CAACV;AAJZ,SACOe,CADP;AAAA;AAAA;AAAA;AAAA,eADF;AAQD,KATA,CAFH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAeD;;GAnDuB5B,W;;KAAAA,W","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TutorCard from \"../misc/TutorCard.js\";\r\nimport firebase from \"firebase\";\r\n\r\nexport default function TutorSearch({ subject }) {\r\n  useEffect(() => {\r\n    fetchTutors();\r\n  }, []);\r\n\r\n  const [tutors, setTutors] = useState([]);\r\n\r\n  const [_grade, _setGrade] = useState(0);\r\n\r\n  async function fetchTutors() {\r\n    setTutors([]);\r\n    const db = firebase.firestore();\r\n    const data = await db\r\n      .collection(\"students\")\r\n      .doc(firebase.auth().currentUser.uid)\r\n      .get()\r\n      .then((data) => data.data())\r\n      .then((data) => {\r\n        _setGrade(data[\"grade\"]);\r\n        console.log(\"Grade: \" + _grade);\r\n      });\r\n\r\n    const response = db\r\n      .collection(\"tutors\")\r\n      .where(\"subjects\", \"==\", \"Science\")\r\n      .where(\"grade\", \">=\", \"10\");\r\n\r\n    // TODO: Fix the self replicating error somehow...\r\n    const tutor_data = await response.get();\r\n    tutor_data.forEach((item) => {\r\n      const item_data = item.data();\r\n      setTutors([...tutors, item_data]);\r\n      console.log(`Tutors: ${JSON.stringify(item_data)}`);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"tutorList\">\r\n      <p>{_grade}</p>\r\n      {tutors.map((item, i) => {\r\n        return (\r\n          <TutorCard\r\n            key={i}\r\n            name={item.name}\r\n            gradeLevel={`${item.grade}th grade`}\r\n            uid={item.uid}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}